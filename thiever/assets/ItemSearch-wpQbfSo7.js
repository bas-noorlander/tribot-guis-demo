import{d as C,e as p,c as a,g as v,o as r,p as M,r as h,D as b,n as O,h as U,b as c,u as Q,t as A,x as G,f as H,z as K,A as P,a as D,G as J,w as X,k as R,s as V,F as Y,l as Z,T as _,E as ee,_ as te}from"./index-DSEOJEEp.js";const oe=["src","alt"],T="https://raw.githubusercontent.com/DayV-git/osrsreboxed-db/master/docs/",N=C({__name:"ItemIcon",props:{id:{},type:{default:"item"},size:{default:"2rem"}},setup(e){const f=e,t=p(()=>{switch(f.type){case"item":return`${T}items-icons/${f.id}.png`;case"equipment":return`${T}items-icons/${f.id}.png`;default:return""}});return(i,g)=>t.value?(r(),a("img",{key:0,src:t.value,alt:`Item ${e.id}`,class:"object-contain",style:M({width:e.size,height:e.size})},null,12,oe)):v("",!0)}});function ne(e){return e!==null&&"ignored"in e&&e.ignored===!0}function w(e){return e!==null&&"osrsId"in e}const re=["draggable"],ae={key:0,class:"flex flex-col items-center justify-center text-amber-500/70"},se={key:1,class:"w-1/2 h-1/2 text-neutral-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},le={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 4.5c-3.5 0-6 2.5-6 6v3c0 1 .5 2 1.5 2.5l1 .5v2h7v-2l1-.5c1-.5 1.5-1.5 1.5-2.5v-3c0-3.5-2.5-6-6-6z"},ie={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M6 7l-2 3v8h4v-5h8v5h4v-8l-2-3H6zM9 7V5a3 3 0 016 0v2"},de={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8 4h8v6l-1 10h-2l-1-8-1 8h-2l-1-10V4z"},ue={key:3,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M14.5 4l-9 9 1.5 1.5 3-3v5.5h2v-5.5l3 3 1.5-1.5-9-9z"},ce={key:4,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 3L4 6v5c0 5 3.5 8.5 8 10 4.5-1.5 8-5 8-10V6l-8-3z"},me={key:5,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},ve={key:3,class:"absolute bottom-0.5 right-0.5 px-1 min-w-[1rem] text-center text-[10px] font-bold text-amber-300 bg-neutral-900/90 rounded"},ze=C({__name:"ItemSlot",props:{item:{},placeholder:{},size:{default:"2.5rem"},showQuantity:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1}},emits:["click","clear","dragstart","dragend","dragover","dragleave","drop","contextmenu"],setup(e,{emit:f}){const t=e,i=p(()=>w(t.item)),g=p(()=>ne(t.item)),d=f,y=h(null);function S(){!t.disabled&&y.value&&d("click",y.value)}function x(m){return m>=1e7?`${Math.floor(m/1e6)}M`:m>=1e5?`${Math.floor(m/1e3)}K`:m.toString()}const $=p(()=>t.showQuantity&&w(t.item)&&t.item.quantity>1);return(m,o)=>(r(),a("div",{ref_key:"slotRef",ref:y,class:O(["item-slot group relative flex items-center justify-center rounded transition-all cursor-pointer",[e.transparent?"border-2 border-black/50 bg-black/30 shadow-inner hover:bg-black/20 hover:border-amber-600/50":i.value?"bg-neutral-800 border border-neutral-700 hover:border-orange-500/50":g.value?"bg-neutral-800/50 border border-dashed border-amber-600/50":"bg-neutral-800/50 border border-dashed border-neutral-700 hover:border-neutral-500",e.disabled&&"opacity-50 cursor-not-allowed",e.draggable&&i.value&&"cursor-grab active:cursor-grabbing"]]),style:M({width:e.size,height:e.size}),draggable:e.draggable&&i.value,onClick:S,onContextmenu:o[1]||(o[1]=b(s=>d("contextmenu",s),["prevent"])),onDragstart:o[2]||(o[2]=s=>d("dragstart",s)),onDragend:o[3]||(o[3]=s=>d("dragend",s)),onDragover:o[4]||(o[4]=b(s=>d("dragover",s),["prevent"])),onDragleave:o[5]||(o[5]=s=>d("dragleave",s)),onDrop:o[6]||(o[6]=b(s=>d("drop",s),["prevent"]))},[g.value?(r(),a("div",ae,[...o[7]||(o[7]=[c("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})],-1)])])):!i.value&&e.placeholder&&!e.transparent?(r(),a("svg",se,[e.placeholder==="head"?(r(),a("path",le)):e.placeholder==="body"?(r(),a("path",ie)):e.placeholder==="legs"?(r(),a("path",de)):e.placeholder==="weapon"?(r(),a("path",ue)):e.placeholder==="shield"?(r(),a("path",ce)):(r(),a("path",me))])):v("",!0),i.value&&Q(w)(e.item)?(r(),U(N,{key:2,id:e.item.osrsId,size:`calc(${e.size} - 0.5rem)`},null,8,["id","size"])):v("",!0),$.value&&Q(w)(e.item)?(r(),a("div",ve,A(x(e.item.quantity)),1)):v("",!0),(i.value||g.value)&&!e.disabled?(r(),a("button",{key:4,class:"absolute -top-1.5 -right-1.5 w-4 h-4 flex items-center justify-center bg-neutral-800 border border-neutral-600 rounded-full opacity-0 group-hover:opacity-100 hover:bg-red-500 hover:border-red-500 transition-all",onClick:o[0]||(o[0]=b(s=>d("clear"),["stop"]))},[...o[8]||(o[8]=[c("svg",{class:"w-2.5 h-2.5 text-neutral-400 hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"})],-1)])])):v("",!0)],46,re))}}),fe={class:"p-2 border-b border-neutral-800"},he={key:0,class:"px-3 py-2 border-b border-neutral-800 flex items-center gap-2"},pe={key:1,class:"px-4 py-8 text-center text-neutral-500 text-sm"},ge={key:2,class:"max-h-64 overflow-y-auto custom-scrollbar"},be={key:0,class:"px-4 py-8 text-center text-neutral-500 text-sm"},ye={key:1,class:"px-4 py-8 text-center text-neutral-500 text-sm"},ke=["onClick"],xe={class:"text-sm text-neutral-200 truncate"},we=C({__name:"ItemSearch",props:{show:{type:Boolean},anchorEl:{},showQuantity:{type:Boolean},defaultQuantity:{},equipmentSlot:{}},emits:["update:show","select"],setup(e,{emit:f}){const t=e,i=f,{searchItems:g,searchSlotItems:d,loading:y,loaded:S,isSlotLoaded:x,isSlotLoading:$,loadSlotItems:m}=G(),o=h(""),s=h(1),z=h(null),B=h(null),L=h({top:"0px",left:"0px"}),I=h(!1),W=p(()=>t.equipmentSlot?$(t.equipmentSlot):y.value);p(()=>t.equipmentSlot?x(t.equipmentSlot):S.value);const q=p(()=>o.value.trim()?t.equipmentSlot?d(t.equipmentSlot,o.value,50):g(o.value,50):[]);function k(){if(!t.anchorEl)return;const u=t.anchorEl.getBoundingClientRect(),n=280;let l=u.left+u.width/2-n/2;l<8&&(l=8),l+n>window.innerWidth-8&&(l=window.innerWidth-n-8),L.value={top:`${u.bottom+8}px`,left:`${l}px`}}function F(u,n){i("select",{osrsId:u,name:n,quantity:t.showQuantity?s.value:1}),E()}function E(){i("update:show",!1),o.value="",s.value=t.defaultQuantity??1}function j(u){if(I.value){I.value=!1;return}const n=u.target;z.value&&!z.value.contains(n)&&t.anchorEl&&!t.anchorEl.contains(n)&&E()}return H(()=>t.show,async u=>{var n;u&&(I.value=!0,s.value=t.defaultQuantity??1,t.equipmentSlot&&!x(t.equipmentSlot)&&m(t.equipmentSlot),await ee(),k(),(n=B.value)==null||n.focus())}),K(()=>{document.addEventListener("click",j),window.addEventListener("scroll",k,!0),window.addEventListener("resize",k)}),P(()=>{document.removeEventListener("click",j),window.removeEventListener("scroll",k,!0),window.removeEventListener("resize",k)}),(u,n)=>(r(),U(_,{to:"body"},[D(J,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:X(()=>[e.show?(r(),a("div",{key:0,ref_key:"dropdownRef",ref:z,class:"fixed z-[9999] w-[280px] bg-neutral-900 border border-neutral-700 rounded-lg shadow-xl overflow-hidden",style:M(L.value)},[c("div",fe,[R(c("input",{ref_key:"searchInputRef",ref:B,"onUpdate:modelValue":n[0]||(n[0]=l=>o.value=l),type:"text",placeholder:"Search items...",class:"w-full px-3 py-2 bg-neutral-800 border border-neutral-700 rounded-md text-sm text-neutral-100 focus:outline-none focus:ring-1 focus:ring-orange-500/30 focus:border-orange-500/50",onClick:n[1]||(n[1]=b(()=>{},["stop"]))},null,512),[[V,o.value]])]),e.showQuantity?(r(),a("div",he,[n[4]||(n[4]=c("label",{class:"text-xs text-neutral-400"},"Qty:",-1)),R(c("input",{"onUpdate:modelValue":n[2]||(n[2]=l=>s.value=l),type:"number",min:"1",max:"2147483647",class:"w-20 px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm text-neutral-100 focus:outline-none focus:ring-1 focus:ring-orange-500/30 focus:border-orange-500/50",onClick:n[3]||(n[3]=b(()=>{},["stop"]))},null,512),[[V,s.value,void 0,{number:!0}]])])):v("",!0),W.value?(r(),a("div",pe," Loading items... ")):(r(),a("div",ge,[o.value&&q.value.length===0?(r(),a("div",be," No items found ")):o.value?v("",!0):(r(),a("div",ye," Type to search items ")),(r(!0),a(Y,null,Z(q.value,l=>(r(),a("button",{key:l.id,type:"button",class:"w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-neutral-800",onClick:Se=>F(l.id,l.name)},[D(N,{id:l.id,size:"1.5rem"},null,8,["id"]),c("span",xe,A(l.name),1)],8,ke))),128))]))],4)):v("",!0)]),_:1})]))}}),Ie=te(we,[["__scopeId","data-v-d4c25107"]]);export{Ie as I,N as _,ze as a,ne as b,w as i};
