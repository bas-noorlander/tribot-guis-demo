import{d as K,c as r,o,g as D,b as n,t as N,e as E,l as H,r as y,F as Y,m as J,n as P,a as V,p as Ve,w as te,j as Se,_ as ne,q as W,h as X,u as R,s as oe,f as ze,x as ae,y as se,T as De,k as _,z as ee,A as re,B as ve,C as fe,D as pe,E as be}from"./index-BaGJwHoO.js";import{a as Me}from"./Button.vue_vue_type_script_setup_true_lang-DYkh_JV_.js";const qe={key:0,class:"block text-sm font-medium text-neutral-400 mb-2"},Le=["type","value","placeholder","min","max","disabled"],Ee=K({__name:"FormInput",props:{modelValue:{},type:{},placeholder:{},min:{},max:{},disabled:{type:Boolean},label:{}},emits:["update:modelValue"],setup(t){return(I,u)=>(o(),r("div",null,[t.label?(o(),r("label",qe,N(t.label),1)):D("",!0),n("input",{type:t.type||"text",value:t.modelValue,placeholder:t.placeholder,min:t.min,max:t.max,disabled:t.disabled,class:"w-full px-4 py-3 bg-neutral-900 border border-neutral-700 rounded-lg text-neutral-100 placeholder-neutral-500 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500/30 focus:border-orange-500/50 hover:border-neutral-600 disabled:bg-neutral-800 disabled:text-neutral-500 disabled:cursor-not-allowed",onInput:u[0]||(u[0]=h=>I.$emit("update:modelValue",t.type==="number"?Number(h.target.value):h.target.value))},null,40,Le)]))}}),je=["src","alt"],me="https://raw.githubusercontent.com/DayV-git/osrsreboxed-db/master/docs/",le=K({__name:"ItemIcon",props:{id:{},type:{default:"item"},size:{default:"2rem"}},setup(t){const I=t,u=E(()=>{switch(I.type){case"item":return`${me}items-icons/${I.id}.png`;case"equipment":return`${me}items-icons/${I.id}.png`;default:return""}});return(h,S)=>u.value?(o(),r("img",{key:0,src:u.value,alt:`Item ${t.id}`,class:"object-contain",style:H({width:t.size,height:t.size})},null,12,je)):D("",!0)}}),Be={class:"space-y-4"},Te={class:"space-y-1 max-h-64 overflow-y-auto custom-scrollbar"},Ae={class:"text-neutral-200 text-sm flex items-center gap-2"},Qe={key:0,class:"px-1.5 py-0.5 text-[10px] font-medium bg-neutral-700/50 text-neutral-400 rounded"},Ge=["name","checked","disabled","onChange"],Re=["name","checked","disabled","onChange"],Ue={class:"text-neutral-200 text-sm flex items-center gap-2"},Ne=["onClick"],Oe={class:"w-16 flex justify-center cursor-pointer"},Fe=["name","checked","disabled","onChange"],Ke={class:"w-16 flex justify-center cursor-pointer"},We=["name","checked","disabled","onChange"],Pe={key:0,class:"flex gap-2 pt-2 border-t border-neutral-800"},Xe=K({__name:"LootConfigTable",props:{items:{},modelValue:{},disabled:{type:Boolean},lockedItems:{},allowCustomItems:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:I}){const u=t;function h(c){var i;return!!((i=u.lockedItems)!=null&&i[c])}function S(c){var i,a;return((a=(i=u.lockedItems)==null?void 0:i[c])==null?void 0:a.reason)||""}const k=I,x=y(""),M=E(()=>{const c=new Map;return u.modelValue.forEach(i=>c.set(i.itemId,i.action)),c});function j(c){return M.value.get(c)||"keep"}function C(c,i){const a=u.modelValue.filter(z=>z.itemId!==c);a.push({itemId:c,action:i}),k("update:modelValue",a)}function b(){if(!x.value.trim())return;const c=x.value.toLowerCase().replace(/\s+/g,"_");if(u.modelValue.some(a=>a.itemId===c)){x.value="";return}const i=[...u.modelValue,{itemId:c,action:"keep"}];k("update:modelValue",i),x.value=""}function m(c){k("update:modelValue",u.modelValue.filter(i=>i.itemId!==c))}const p=E(()=>{const c=new Set(u.items.map(i=>i.id));return u.modelValue.filter(i=>!c.has(i.itemId))});return(c,i)=>(o(),r("div",Be,[i[3]||(i[3]=n("div",{class:"grid grid-cols-[1fr,auto,auto] gap-2 text-sm font-medium text-neutral-400 px-2"},[n("div",null,"Item"),n("div",{class:"w-16 text-center"},"Keep"),n("div",{class:"w-16 text-center"},"Drop")],-1)),n("div",Te,[(o(!0),r(Y,null,J(t.items,a=>(o(),r("div",{key:a.id,class:P(["grid grid-cols-[1fr,auto,auto] gap-2 items-center px-2 py-2 rounded-lg transition-colors",h(a.id)?"opacity-50":"hover:bg-neutral-800/50"])},[n("div",Ae,[V(le,{id:a.osrsId,size:"1.25rem"},null,8,["id"]),n("span",null,N(a.name),1),h(a.id)?(o(),r("span",Qe,N(S(a.id)),1)):D("",!0)]),n("label",{class:P(["w-16 flex justify-center",h(a.id)?"cursor-not-allowed":"cursor-pointer"])},[n("input",{type:"radio",name:`loot-${a.id}`,checked:j(a.id)==="keep",disabled:t.disabled||h(a.id),class:"radio-keep",onChange:z=>C(a.id,"keep")},null,40,Ge)],2),n("label",{class:P(["w-16 flex justify-center",h(a.id)?"cursor-not-allowed":"cursor-pointer"])},[n("input",{type:"radio",name:`loot-${a.id}`,checked:j(a.id)==="drop",disabled:t.disabled||h(a.id),class:"radio-drop",onChange:z=>C(a.id,"drop")},null,40,Re)],2)],2))),128)),t.allowCustomItems?(o(!0),r(Y,{key:0},J(p.value,a=>(o(),r("div",{key:a.itemId,class:"grid grid-cols-[1fr,auto,auto] gap-2 items-center px-2 py-2 rounded-lg bg-neutral-800/30 border border-neutral-700/50"},[n("div",Ue,[n("span",null,N(a.itemId.replace(/_/g," ")),1),n("button",{class:"text-neutral-500 hover:text-red-400 transition-colors",onClick:z=>m(a.itemId)},[...i[1]||(i[1]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Ne)]),n("label",Oe,[n("input",{type:"radio",name:`loot-${a.itemId}`,checked:a.action==="keep",disabled:t.disabled,class:"radio-keep",onChange:z=>C(a.itemId,"keep")},null,40,Fe)]),n("label",Ke,[n("input",{type:"radio",name:`loot-${a.itemId}`,checked:a.action==="drop",disabled:t.disabled,class:"radio-drop",onChange:z=>C(a.itemId,"drop")},null,40,We)])]))),128)):D("",!0)]),t.allowCustomItems?(o(),r("div",Pe,[V(Ee,{modelValue:x.value,"onUpdate:modelValue":i[0]||(i[0]=a=>x.value=a),placeholder:"Add custom item...",class:"flex-1",disabled:t.disabled,onKeyup:Ve(b,["enter"])},null,8,["modelValue","disabled"]),V(Me,{variant:"secondary",size:"sm",disabled:t.disabled||!x.value.trim(),onClick:b},{default:te(()=>[...i[2]||(i[2]=[Se(" Add ",-1)])]),_:1},8,["disabled"])])):D("",!0)]))}}),un=ne(Xe,[["__scopeId","data-v-7eb26555"]]),Ye={class:"relative rounded-lg overflow-hidden border border-neutral-700 bg-neutral-800"},He=["src"],cn=K({__name:"WorldMap",props:{x:{},y:{},plane:{default:0},zoom:{default:9},height:{default:"14rem"}},setup(t){const I=t,u=E(()=>`https://map.lanbotpanel.com/?centreX=${I.x}&centreY=${I.y}&centreZ=${I.plane}&zoom=${I.zoom}`);return(h,S)=>(o(),r("div",Ye,[n("iframe",{class:"w-full",style:H({height:t.height}),src:u.value,frameborder:"0"},null,12,He)]))}});function F(t){return t!==null&&"ignored"in t&&t.ignored===!0}function U(t){return t!==null&&"osrsId"in t}const Je=["draggable"],Ze={key:0,class:"flex flex-col items-center justify-center text-amber-500/70"},_e={key:1,class:"w-1/2 h-1/2 text-neutral-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},et={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 4.5c-3.5 0-6 2.5-6 6v3c0 1 .5 2 1.5 2.5l1 .5v2h7v-2l1-.5c1-.5 1.5-1.5 1.5-2.5v-3c0-3.5-2.5-6-6-6z"},tt={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M6 7l-2 3v8h4v-5h8v5h4v-8l-2-3H6zM9 7V5a3 3 0 016 0v2"},nt={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8 4h8v6l-1 10h-2l-1-8-1 8h-2l-1-10V4z"},lt={key:3,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M14.5 4l-9 9 1.5 1.5 3-3v5.5h2v-5.5l3 3 1.5-1.5-9-9z"},ot={key:4,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 3L4 6v5c0 5 3.5 8.5 8 10 4.5-1.5 8-5 8-10V6l-8-3z"},at={key:5,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},st={key:3,class:"absolute bottom-0.5 right-0.5 px-1 min-w-[1rem] text-center text-[10px] font-bold text-amber-300 bg-neutral-900/90 rounded"},B=K({__name:"ItemSlot",props:{item:{},placeholder:{},size:{default:"2.5rem"},showQuantity:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1}},emits:["click","clear","dragstart","dragend","dragover","dragleave","drop","contextmenu"],setup(t,{emit:I}){const u=t,h=E(()=>U(u.item)),S=E(()=>F(u.item)),k=I,x=y(null);function M(){!u.disabled&&x.value&&k("click",x.value)}function j(b){return b>=1e7?`${Math.floor(b/1e6)}M`:b>=1e5?`${Math.floor(b/1e3)}K`:b.toString()}const C=E(()=>u.showQuantity&&U(u.item)&&u.item.quantity>1);return(b,m)=>(o(),r("div",{ref_key:"slotRef",ref:x,class:P(["item-slot group relative flex items-center justify-center rounded transition-all cursor-pointer",[t.transparent?"border-2 border-black/50 bg-black/30 shadow-inner hover:bg-black/20 hover:border-amber-600/50":h.value?"bg-neutral-800 border border-neutral-700 hover:border-orange-500/50":S.value?"bg-neutral-800/50 border border-dashed border-amber-600/50":"bg-neutral-800/50 border border-dashed border-neutral-700 hover:border-neutral-500",t.disabled&&"opacity-50 cursor-not-allowed",t.draggable&&h.value&&"cursor-grab active:cursor-grabbing"]]),style:H({width:t.size,height:t.size}),draggable:t.draggable&&h.value,onClick:M,onContextmenu:m[1]||(m[1]=W(p=>k("contextmenu",p),["prevent"])),onDragstart:m[2]||(m[2]=p=>k("dragstart",p)),onDragend:m[3]||(m[3]=p=>k("dragend",p)),onDragover:m[4]||(m[4]=W(p=>k("dragover",p),["prevent"])),onDragleave:m[5]||(m[5]=p=>k("dragleave",p)),onDrop:m[6]||(m[6]=W(p=>k("drop",p),["prevent"]))},[S.value?(o(),r("div",Ze,[...m[7]||(m[7]=[n("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})],-1)])])):!h.value&&t.placeholder&&!t.transparent?(o(),r("svg",_e,[t.placeholder==="head"?(o(),r("path",et)):t.placeholder==="body"?(o(),r("path",tt)):t.placeholder==="legs"?(o(),r("path",nt)):t.placeholder==="weapon"?(o(),r("path",lt)):t.placeholder==="shield"?(o(),r("path",ot)):(o(),r("path",at))])):D("",!0),h.value&&R(U)(t.item)?(o(),X(le,{key:2,id:t.item.osrsId,size:`calc(${t.size} - 0.5rem)`},null,8,["id","size"])):D("",!0),C.value&&R(U)(t.item)?(o(),r("div",st,N(j(t.item.quantity)),1)):D("",!0),(h.value||S.value)&&!t.disabled?(o(),r("button",{key:4,class:"absolute -top-1.5 -right-1.5 w-4 h-4 flex items-center justify-center bg-neutral-800 border border-neutral-600 rounded-full opacity-0 group-hover:opacity-100 hover:bg-red-500 hover:border-red-500 transition-all",onClick:m[0]||(m[0]=W(p=>k("clear"),["stop"]))},[...m[8]||(m[8]=[n("svg",{class:"w-2.5 h-2.5 text-neutral-400 hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"})],-1)])])):D("",!0)],46,Je))}}),rt={class:"p-2 border-b border-neutral-800"},dt={key:0,class:"px-3 py-2 border-b border-neutral-800 flex items-center gap-2"},it={key:1,class:"px-4 py-8 text-center text-neutral-500 text-sm"},ut={key:2,class:"max-h-64 overflow-y-auto custom-scrollbar"},ct={key:0,class:"px-4 py-8 text-center text-neutral-500 text-sm"},mt={key:1,class:"px-4 py-8 text-center text-neutral-500 text-sm"},vt=["onClick"],ft={class:"text-sm text-neutral-200 truncate"},pt=K({__name:"ItemSearch",props:{show:{type:Boolean},anchorEl:{},showQuantity:{type:Boolean},defaultQuantity:{},equipmentSlot:{}},emits:["update:show","select"],setup(t,{emit:I}){const u=t,h=I,{searchItems:S,searchSlotItems:k,loading:x,loaded:M,isSlotLoaded:j,isSlotLoading:C,loadSlotItems:b}=oe(),m=y(""),p=y(1),c=y(null),i=y(null),a=y({top:"0px",left:"0px"}),z=y(!1),O=E(()=>u.equipmentSlot?C(u.equipmentSlot):x.value);E(()=>u.equipmentSlot?j(u.equipmentSlot):M.value);const G=E(()=>m.value.trim()?u.equipmentSlot?k(u.equipmentSlot,m.value,50):S(m.value,50):[]);function $(){if(!u.anchorEl)return;const q=u.anchorEl.getBoundingClientRect(),g=280;let v=q.left+q.width/2-g/2;v<8&&(v=8),v+g>window.innerWidth-8&&(v=window.innerWidth-g-8),a.value={top:`${q.bottom+8}px`,left:`${v}px`}}function T(q,g){h("select",{osrsId:q,name:g,quantity:u.showQuantity?p.value:1}),Q()}function Q(){h("update:show",!1),m.value="",p.value=u.defaultQuantity??1}function A(q){if(z.value){z.value=!1;return}const g=q.target;c.value&&!c.value.contains(g)&&u.anchorEl&&!u.anchorEl.contains(g)&&Q()}return ze(()=>u.show,async q=>{var g;q&&(z.value=!0,p.value=u.defaultQuantity??1,u.equipmentSlot&&!j(u.equipmentSlot)&&b(u.equipmentSlot),await ve(),$(),(g=i.value)==null||g.focus())}),ae(()=>{document.addEventListener("click",A),window.addEventListener("scroll",$,!0),window.addEventListener("resize",$)}),se(()=>{document.removeEventListener("click",A),window.removeEventListener("scroll",$,!0),window.removeEventListener("resize",$)}),(q,g)=>(o(),X(re,{to:"body"},[V(De,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:te(()=>[t.show?(o(),r("div",{key:0,ref_key:"dropdownRef",ref:c,class:"fixed z-[9999] w-[280px] bg-neutral-900 border border-neutral-700 rounded-lg shadow-xl overflow-hidden",style:H(a.value)},[n("div",rt,[_(n("input",{ref_key:"searchInputRef",ref:i,"onUpdate:modelValue":g[0]||(g[0]=v=>m.value=v),type:"text",placeholder:"Search items...",class:"w-full px-3 py-2 bg-neutral-800 border border-neutral-700 rounded-md text-sm text-neutral-100 focus:outline-none focus:ring-1 focus:ring-orange-500/30 focus:border-orange-500/50",onClick:g[1]||(g[1]=W(()=>{},["stop"]))},null,512),[[ee,m.value]])]),t.showQuantity?(o(),r("div",dt,[g[4]||(g[4]=n("label",{class:"text-xs text-neutral-400"},"Qty:",-1)),_(n("input",{"onUpdate:modelValue":g[2]||(g[2]=v=>p.value=v),type:"number",min:"1",max:"2147483647",class:"w-20 px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm text-neutral-100 focus:outline-none focus:ring-1 focus:ring-orange-500/30 focus:border-orange-500/50",onClick:g[3]||(g[3]=W(()=>{},["stop"]))},null,512),[[ee,p.value,void 0,{number:!0}]])])):D("",!0),O.value?(o(),r("div",it," Loading items... ")):(o(),r("div",ut,[m.value&&G.value.length===0?(o(),r("div",ct," No items found ")):m.value?D("",!0):(o(),r("div",mt," Type to search items ")),(o(!0),r(Y,null,J(G.value,v=>(o(),r("button",{key:v.id,type:"button",class:"w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-neutral-800",onClick:e=>T(v.id,v.name)},[V(le,{id:v.id,size:"1.5rem"},null,8,["id"]),n("span",ft,N(v.name),1)],8,vt))),128))]))],4)):D("",!0)]),_:1})]))}}),bt=ne(pt,[["__scopeId","data-v-d4c25107"]]),xt={class:"flex justify-center"},gt={class:"space-y-3 w-fit"},yt={class:"equipment-grid"},ht={class:"head"},kt={class:"cape"},wt={class:"neck"},Ct={class:"ammo"},$t={class:"weapon"},It={class:"body"},Vt={class:"shield"},St={class:"legs"},zt={class:"hands"},Dt={class:"feet"},Mt={class:"slot-ring"},qt={key:0},Lt={key:1},Et={class:"flex justify-center gap-2"},jt=["disabled"],Bt={key:0},Tt={key:1},At=["disabled"],Qt=K({__name:"EquipmentGrid",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:I}){const{isTwoHanded:u}=oe(),{getEquipment:h}=fe(),{isDemoMode:S,demoTooltip:k}=pe(),x=t,M=I,j=y(!1),C=y(null),b=y(null),m=y(null),p=y({x:0,y:0});function c(v,e){x.disabled||(C.value=v,b.value=e,j.value=!0)}function i(v,e){if(x.disabled)return;const l=x.modelValue[e];U(l)||(v.preventDefault(),m.value=e,p.value={x:v.clientX,y:v.clientY})}function a(){m.value=null}function z(){if(!m.value)return;const v=m.value,e=x.modelValue[v];F(e)?M("update:modelValue",{...x.modelValue,[v]:null}):e===null&&M("update:modelValue",{...x.modelValue,[v]:{ignored:!0}}),a()}function O(v){v.target.closest(".context-menu")||a()}ae(()=>{document.addEventListener("click",O)}),se(()=>{document.removeEventListener("click",O)});function G(v){if(!C.value)return;const e={...x.modelValue,[C.value]:v};C.value==="weapon"&&u(v.osrsId)&&(e.shield=null),C.value==="shield"&&e.weapon&&u(e.weapon.osrsId)&&(e.weapon=null),M("update:modelValue",e)}function $(v){M("update:modelValue",{...x.modelValue,[v]:null})}const T=y(!1),Q=y(!1),A=E(()=>Object.values(x.modelValue).some(v=>U(v)||F(v)));function q(){if(!T.value){T.value=!0,setTimeout(()=>{T.value=!1},3e3);return}M("update:modelValue",{head:null,cape:null,neck:null,ammo:null,weapon:null,body:null,shield:null,legs:null,hands:null,feet:null,ring:null}),T.value=!1}async function g(){if(!(x.disabled||Q.value)){Q.value=!0;try{const v=await h(),e={head:null,cape:null,neck:null,ammo:null,weapon:null,body:null,shield:null,legs:null,hands:null,feet:null,ring:null};for(const l of v)e[l.slot]={osrsId:l.id,name:l.name,quantity:l.amount};M("update:modelValue",e)}catch(v){console.error("Failed to fetch equipment:",v)}finally{Q.value=!1}}}return(v,e)=>(o(),r(Y,null,[n("div",xt,[n("div",gt,[n("div",yt,[n("div",ht,[V(B,{item:t.modelValue.head,disabled:t.disabled,size:"42px",transparent:"",onClick:e[0]||(e[0]=l=>c("head",l)),onClear:e[1]||(e[1]=l=>$("head")),onContextmenu:e[2]||(e[2]=l=>i(l,"head"))},null,8,["item","disabled"])]),n("div",kt,[V(B,{item:t.modelValue.cape,disabled:t.disabled,size:"42px",transparent:"",onClick:e[3]||(e[3]=l=>c("cape",l)),onClear:e[4]||(e[4]=l=>$("cape")),onContextmenu:e[5]||(e[5]=l=>i(l,"cape"))},null,8,["item","disabled"])]),n("div",wt,[V(B,{item:t.modelValue.neck,disabled:t.disabled,size:"42px",transparent:"",onClick:e[6]||(e[6]=l=>c("neck",l)),onClear:e[7]||(e[7]=l=>$("neck")),onContextmenu:e[8]||(e[8]=l=>i(l,"neck"))},null,8,["item","disabled"])]),n("div",Ct,[V(B,{item:t.modelValue.ammo,disabled:t.disabled,size:"42px",transparent:"",onClick:e[9]||(e[9]=l=>c("ammo",l)),onClear:e[10]||(e[10]=l=>$("ammo")),onContextmenu:e[11]||(e[11]=l=>i(l,"ammo"))},null,8,["item","disabled"])]),n("div",$t,[V(B,{item:t.modelValue.weapon,disabled:t.disabled,size:"42px",transparent:"",onClick:e[12]||(e[12]=l=>c("weapon",l)),onClear:e[13]||(e[13]=l=>$("weapon")),onContextmenu:e[14]||(e[14]=l=>i(l,"weapon"))},null,8,["item","disabled"])]),n("div",It,[V(B,{item:t.modelValue.body,disabled:t.disabled,size:"42px",transparent:"",onClick:e[15]||(e[15]=l=>c("body",l)),onClear:e[16]||(e[16]=l=>$("body")),onContextmenu:e[17]||(e[17]=l=>i(l,"body"))},null,8,["item","disabled"])]),n("div",Vt,[V(B,{item:t.modelValue.shield,disabled:t.disabled,size:"42px",transparent:"",onClick:e[18]||(e[18]=l=>c("shield",l)),onClear:e[19]||(e[19]=l=>$("shield")),onContextmenu:e[20]||(e[20]=l=>i(l,"shield"))},null,8,["item","disabled"])]),n("div",St,[V(B,{item:t.modelValue.legs,disabled:t.disabled,size:"42px",transparent:"",onClick:e[21]||(e[21]=l=>c("legs",l)),onClear:e[22]||(e[22]=l=>$("legs")),onContextmenu:e[23]||(e[23]=l=>i(l,"legs"))},null,8,["item","disabled"])]),n("div",zt,[V(B,{item:t.modelValue.hands,disabled:t.disabled,size:"42px",transparent:"",onClick:e[24]||(e[24]=l=>c("hands",l)),onClear:e[25]||(e[25]=l=>$("hands")),onContextmenu:e[26]||(e[26]=l=>i(l,"hands"))},null,8,["item","disabled"])]),n("div",Dt,[V(B,{item:t.modelValue.feet,disabled:t.disabled,size:"42px",transparent:"",onClick:e[27]||(e[27]=l=>c("feet",l)),onClear:e[28]||(e[28]=l=>$("feet")),onContextmenu:e[29]||(e[29]=l=>i(l,"feet"))},null,8,["item","disabled"])]),n("div",Mt,[V(B,{item:t.modelValue.ring,disabled:t.disabled,size:"42px",transparent:"",onClick:e[30]||(e[30]=l=>c("ring",l)),onClear:e[31]||(e[31]=l=>$("ring")),onContextmenu:e[32]||(e[32]=l=>i(l,"ring"))},null,8,["item","disabled"])])]),(o(),X(re,{to:"body"},[m.value!==null?(o(),r("div",{key:0,class:"context-menu fixed z-[9999] bg-neutral-800 border border-neutral-600 rounded-lg shadow-xl p-2 min-w-[140px]",style:H({top:p.value.y+"px",left:p.value.x+"px"})},[n("button",{type:"button",class:"w-full px-3 py-2 text-left text-sm text-neutral-200 hover:bg-neutral-700 rounded transition-colors flex items-center gap-2",onClick:z},[e[34]||(e[34]=n("svg",{class:"w-4 h-4 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})],-1)),R(F)(t.modelValue[m.value])?(o(),r("span",qt,"Unignore slot")):(o(),r("span",Lt,"Ignore slot"))]),e[35]||(e[35]=n("p",{class:"px-3 py-1 text-xs text-neutral-500"}," Script won't change this slot ",-1))],4)):D("",!0)])),n("div",Et,[R(S)?(o(),X(be,{key:0,text:R(k),position:"top"},{default:te(()=>[...e[36]||(e[36]=[n("button",{type:"button",class:"px-3 py-1.5 text-xs bg-neutral-700 text-neutral-200 rounded opacity-50 cursor-not-allowed",disabled:""}," Get In-Game ",-1)])]),_:1},8,["text"])):(o(),r("button",{key:1,type:"button",class:"px-3 py-1.5 text-xs bg-neutral-700 hover:bg-neutral-600 text-neutral-200 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:t.disabled||Q.value,onClick:g},[Q.value?(o(),r("span",Bt,"Loading...")):(o(),r("span",Tt,"Get In-Game"))],8,jt)),n("button",{type:"button",class:P(["px-3 py-1.5 text-xs transition-colors rounded disabled:opacity-50 disabled:cursor-not-allowed",T.value?"bg-red-600 hover:bg-red-500 text-white":"text-neutral-400 hover:text-red-400 hover:bg-neutral-800"]),disabled:t.disabled||!A.value,onClick:q},N(T.value?"Click to confirm":"Clear All"),11,At)])])]),V(bt,{show:j.value,"onUpdate:show":e[33]||(e[33]=l=>j.value=l),"anchor-el":b.value,"show-quantity":!1,"equipment-slot":C.value??void 0,onSelect:G},null,8,["show","anchor-el","equipment-slot"])],64))}}),mn=ne(Qt,[["__scopeId","data-v-bdc17f71"]]),Gt={class:"flex gap-3 items-start"},Rt={class:"space-y-3 w-fit"},Ut={class:"inventory-grid"},Nt={key:0,class:"flex items-center gap-2"},Ot={key:1,class:"min-w-[140px]"},Ft={key:0},Kt={key:1},Wt={class:"flex justify-center gap-2"},Pt=["disabled"],Xt={key:0},Yt={key:1},Ht=["disabled"],Jt={class:"flex-1 min-w-[200px] space-y-3"},Zt=["disabled"],_t={class:"item-list custom-scrollbar"},en={key:0,class:"px-3 py-8 text-center text-neutral-500 text-sm"},tn={key:1,class:"px-3 py-8 text-center text-neutral-500 text-sm"},nn={key:2,class:"px-3 py-8 text-center text-neutral-500 text-sm"},ln=["onDragstart","onClick"],on={class:"truncate"},an=K({__name:"InventoryGrid",props:{modelValue:{},disabled:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:I}){const{isDemoMode:u,demoTooltip:h}=pe(),S=t,k=I,{searchItems:x,loading:M}=oe(),{getInventory:j}=fe(),C=y(!1),b=E(()=>{const d=[];for(let s=0;s<28;s++)d.push(S.modelValue[s]??null);return d}),m=y(""),p=y(null),c=y(null),i=y(null),a=y(null),z=y({x:0,y:0}),O=y("item"),G=y(1),$=y(null),T=E(()=>m.value.trim()?x(m.value,50):[]);function Q(d){const s=[...b.value];s[d]=null,k("update:modelValue",s)}const A=y(!1);function q(){if(!A.value){A.value=!0,setTimeout(()=>{A.value=!1},3e3);return}k("update:modelValue",Array(28).fill(null)),A.value=!1}const g=E(()=>b.value.some(d=>U(d)||F(d)));async function v(){if(!(S.disabled||C.value)){C.value=!0;try{const d=await j(),s=Array(28).fill(null);for(const f of d)f.slot>=0&&f.slot<28&&(s[f.slot]={osrsId:f.id,name:f.name,quantity:f.amount});k("update:modelValue",s)}catch(d){console.error("Failed to fetch inventory:",d)}finally{C.value=!1}}}function e(){return b.value.findIndex(d=>d===null)}function l(d,s,f){if(S.disabled)return;let w=f;if(w===void 0&&(w=e(),w===-1))return;const L=b.value[w];if(f===void 0&&F(L))return;const ce=[...b.value];ce[w]={osrsId:d,name:s,quantity:1},k("update:modelValue",ce)}function xe(d,s){if(S.disabled)return;const f=b.value[s];d.preventDefault(),a.value=s,z.value={x:d.clientX,y:d.clientY},U(f)?(O.value="item",G.value=f.quantity,ve(()=>{var w,L;(w=$.value)==null||w.focus(),(L=$.value)==null||L.select()})):O.value="empty"}function Z(){a.value=null}function ge(){if(a.value===null)return;const d=[...b.value],s=d[a.value];F(s)?d[a.value]=null:s===null&&(d[a.value]={ignored:!0}),k("update:modelValue",d),Z()}function de(){if(a.value===null)return;const d=[...b.value],s=d[a.value];U(s)&&(d[a.value]={...s,quantity:Math.max(1,G.value||1)},k("update:modelValue",d)),Z()}function ye(d){d.key==="Enter"?de():d.key==="Escape"&&Z()}function ie(d){d.target.closest(".context-menu")||Z()}ae(()=>{document.addEventListener("click",ie)}),se(()=>{document.removeEventListener("click",ie)});function he(d,s){l(d,s)}function ke(d,s,f){p.value={osrsId:s,name:f},d.dataTransfer&&(d.dataTransfer.effectAllowed="copy",d.dataTransfer.setData("text/plain",JSON.stringify({osrsId:s,name:f})))}function ue(){p.value=null,c.value=null,i.value=null}function we(d,s){const f=b.value[s];f&&(c.value=s,p.value={osrsId:f.osrsId,name:f.name},d.dataTransfer&&(d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("text/plain",JSON.stringify({index:s,item:f}))))}function Ce(d,s){d.preventDefault(),d.dataTransfer&&(d.dataTransfer.dropEffect=c.value!==null?"move":"copy"),i.value=s}function $e(){i.value=null}function Ie(d,s){if(d.preventDefault(),i.value=null,c.value!==null&&c.value!==s){const f=[...b.value],w=f[s];f[s]=f[c.value],f[c.value]=w,k("update:modelValue",f)}else p.value&&c.value===null&&l(p.value.osrsId,p.value.name,s);p.value=null,c.value=null}function sn(d){}return(d,s)=>(o(),r("div",Gt,[n("div",Rt,[n("div",Ut,[(o(!0),r(Y,null,J(b.value,(f,w)=>(o(),X(B,{key:w,item:f,disabled:t.disabled,"show-quantity":!0,draggable:!t.disabled,transparent:"",class:P({"drag-over":i.value===w&&c.value!==w,dragging:c.value===w}),onClick:L=>void 0,onClear:L=>Q(w),onDragstart:L=>we(L,w),onDragend:ue,onDragover:L=>Ce(L,w),onDragleave:$e,onDrop:L=>Ie(L,w),onContextmenu:L=>xe(L,w)},null,8,["item","disabled","draggable","class","onClick","onClear","onDragstart","onDragover","onDrop","onContextmenu"]))),128))]),(o(),X(re,{to:"body"},[a.value!==null?(o(),r("div",{key:0,class:"context-menu fixed z-[9999] bg-neutral-800 border border-neutral-600 rounded-lg shadow-xl p-2",style:H({top:z.value.y+"px",left:z.value.x+"px"})},[O.value==="item"?(o(),r("div",Nt,[s[3]||(s[3]=n("label",{class:"text-xs text-neutral-400"},"Qty:",-1)),_(n("input",{ref_key:"quantityInputRef",ref:$,"onUpdate:modelValue":s[0]||(s[0]=f=>G.value=f),type:"number",min:"1",max:"2147483647",class:"w-24 px-2 py-1 bg-neutral-900 border border-neutral-600 rounded text-sm text-neutral-100 focus:outline-none focus:ring-1 focus:ring-orange-500/30 focus:border-orange-500/50",onKeydown:ye,onClick:s[1]||(s[1]=W(()=>{},["stop"]))},null,544),[[ee,G.value,void 0,{number:!0}]]),n("button",{type:"button",class:"px-2 py-1 text-xs bg-orange-600 hover:bg-orange-500 text-white rounded transition-colors",onClick:de}," Set ")])):(o(),r("div",Ot,[n("button",{type:"button",class:"w-full px-3 py-2 text-left text-sm text-neutral-200 hover:bg-neutral-700 rounded transition-colors flex items-center gap-2",onClick:ge},[s[4]||(s[4]=n("svg",{class:"w-4 h-4 text-amber-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})],-1)),R(F)(b.value[a.value])?(o(),r("span",Ft,"Unignore slot")):(o(),r("span",Kt,"Ignore slot"))]),s[5]||(s[5]=n("p",{class:"px-3 py-1 text-xs text-neutral-500"}," Script won't change this slot ",-1))]))],4)):D("",!0)])),n("div",Wt,[R(u)?(o(),X(be,{key:0,text:R(h),position:"top"},{default:te(()=>[...s[6]||(s[6]=[n("button",{type:"button",class:"px-3 py-1.5 text-xs bg-neutral-700 text-neutral-200 rounded opacity-50 cursor-not-allowed",disabled:""}," Get In-Game ",-1)])]),_:1},8,["text"])):(o(),r("button",{key:1,type:"button",class:"px-3 py-1.5 text-xs bg-neutral-700 hover:bg-neutral-600 text-neutral-200 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:t.disabled||C.value,onClick:v},[C.value?(o(),r("span",Xt,"Loading...")):(o(),r("span",Yt,"Get In-Game"))],8,Pt)),n("button",{type:"button",class:P(["px-3 py-1.5 text-xs transition-colors rounded disabled:opacity-50 disabled:cursor-not-allowed",A.value?"bg-red-600 hover:bg-red-500 text-white":"text-neutral-400 hover:text-red-400 hover:bg-neutral-800"]),disabled:t.disabled||!g.value,onClick:q},N(A.value?"Click to confirm":"Clear All"),11,Ht)])]),n("div",Jt,[_(n("input",{"onUpdate:modelValue":s[2]||(s[2]=f=>m.value=f),type:"text",placeholder:"Search items...",class:"w-full px-3 py-2 bg-neutral-800 border border-neutral-700 rounded-md text-sm text-neutral-100 focus:outline-none focus:ring-1 focus:ring-orange-500/30 focus:border-orange-500/50",disabled:t.disabled},null,8,Zt),[[ee,m.value]]),n("div",_t,[R(M)?(o(),r("div",en," Loading items... ")):m.value?T.value.length===0?(o(),r("div",nn," No items found ")):D("",!0):(o(),r("div",tn," Search for items to add ")),(o(!0),r(Y,null,J(T.value,f=>(o(),r("div",{key:f.id,class:"item-result",draggable:"true",onDragstart:w=>ke(w,f.id,f.name),onDragend:ue,onClick:w=>he(f.id,f.name)},[V(le,{id:f.id,size:"1.5rem"},null,8,["id"]),n("span",on,N(f.name),1)],40,ln))),128))]),s[7]||(s[7]=n("p",{class:"text-xs text-neutral-500 text-center"}," Click or drag to add. Right-click to set quantity or ignore empty slots. ",-1))])]))}}),vn=ne(an,[["__scopeId","data-v-ee680253"]]);export{mn as E,vn as I,un as L,cn as _,U as i};
