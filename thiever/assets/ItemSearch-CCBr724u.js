import{d as L,e as h,c as l,g as f,o as n,p as q,r as p,D as k,n as K,a as C,h as A,G as N,w as W,b as u,t as B,u as R,_ as F,x as P,f as J,z as X,A as Y,k as V,s as T,F as Z,l as _,T as ee,E as te}from"./index-DBcLFWe9.js";const oe=["src","alt"],U="https://raw.githubusercontent.com/DayV-git/osrsreboxed-db/master/docs/",O=L({__name:"ItemIcon",props:{id:{},type:{default:"item"},size:{default:"2rem"}},setup(e){const b=e,t=h(()=>{switch(b.type){case"item":return`${U}items-icons/${b.id}.png`;case"equipment":return`${U}items-icons/${b.id}.png`;default:return""}});return(d,g)=>t.value?(n(),l("img",{key:0,src:t.value,alt:`Item ${e.id}`,class:"object-contain",style:q({width:e.size,height:e.size})},null,12,oe)):f("",!0)}});function ne(e){return e!==null&&"ignored"in e&&e.ignored===!0}function S(e){return e!==null&&"osrsId"in e}const re=["draggable"],le={key:0,class:"tooltip tooltip-top"},ae={class:"tooltip-text"},se={key:0,class:"flex flex-col items-center justify-center text-amber-500/70"},ie={key:1,class:"w-1/2 h-1/2 text-neutral-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ue={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 4.5c-3.5 0-6 2.5-6 6v3c0 1 .5 2 1.5 2.5l1 .5v2h7v-2l1-.5c1-.5 1.5-1.5 1.5-2.5v-3c0-3.5-2.5-6-6-6z"},de={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M6 7l-2 3v8h4v-5h8v5h4v-8l-2-3H6zM9 7V5a3 3 0 016 0v2"},ce={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8 4h8v6l-1 10h-2l-1-8-1 8h-2l-1-10V4z"},ve={key:3,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M14.5 4l-9 9 1.5 1.5 3-3v5.5h2v-5.5l3 3 1.5-1.5-9-9z"},me={key:4,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 3L4 6v5c0 5 3.5 8.5 8 10 4.5-1.5 8-5 8-10V6l-8-3z"},fe={key:5,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},pe={key:3,class:"absolute bottom-0.5 right-0.5 px-1 min-w-[1rem] text-center text-[10px] font-bold text-amber-300 bg-neutral-900/90 rounded"},he=L({__name:"ItemSlot",props:{item:{},placeholder:{},size:{default:"2.5rem"},showQuantity:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1}},emits:["click","clear","dragstart","dragend","dragover","dragleave","drop","contextmenu"],setup(e,{emit:b}){const t=e,d=h(()=>S(t.item)),g=h(()=>ne(t.item)),x=p(!1),$=h(()=>S(t.item)?t.item.name:""),c=b,y=p(null);function I(){!t.disabled&&y.value&&c("click",y.value)}function z(i){return i>=1e7?`${Math.floor(i/1e6)}M`:i>=1e5?`${Math.floor(i/1e3)}K`:i.toString()}const v=h(()=>t.showQuantity&&S(t.item)&&t.item.quantity>1);return(i,o)=>(n(),l("div",{ref_key:"slotRef",ref:y,class:K(["item-slot group relative flex items-center justify-center rounded transition-all cursor-pointer",[e.transparent?"border-2 border-black/50 bg-black/30 shadow-inner hover:bg-black/20 hover:border-amber-600/50":d.value?"bg-neutral-800 border border-neutral-700 hover:border-orange-500/50":g.value?"bg-neutral-800/50 border border-dashed border-amber-600/50":"bg-neutral-800/50 border border-dashed border-neutral-700 hover:border-neutral-500",e.disabled&&"opacity-50 cursor-not-allowed",e.draggable&&d.value&&"cursor-grab active:cursor-grabbing"]]),style:q({width:e.size,height:e.size}),draggable:e.draggable&&d.value,onClick:I,onContextmenu:o[1]||(o[1]=k(a=>c("contextmenu",a),["prevent"])),onDragstart:o[2]||(o[2]=a=>c("dragstart",a)),onDragend:o[3]||(o[3]=a=>c("dragend",a)),onDragover:o[4]||(o[4]=k(a=>c("dragover",a),["prevent"])),onDragleave:o[5]||(o[5]=a=>c("dragleave",a)),onDrop:o[6]||(o[6]=k(a=>c("drop",a),["prevent"])),onMouseenter:o[7]||(o[7]=a=>x.value=!0),onMouseleave:o[8]||(o[8]=a=>x.value=!1)},[C(N,{name:"tooltip"},{default:W(()=>[x.value&&$.value?(n(),l("div",le,[u("span",ae,B($.value),1),o[9]||(o[9]=u("div",{class:"tooltip-arrow"},null,-1))])):f("",!0)]),_:1}),g.value?(n(),l("div",se,[...o[10]||(o[10]=[u("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})],-1)])])):!d.value&&e.placeholder&&!e.transparent?(n(),l("svg",ie,[e.placeholder==="head"?(n(),l("path",ue)):e.placeholder==="body"?(n(),l("path",de)):e.placeholder==="legs"?(n(),l("path",ce)):e.placeholder==="weapon"?(n(),l("path",ve)):e.placeholder==="shield"?(n(),l("path",me)):(n(),l("path",fe))])):f("",!0),d.value&&R(S)(e.item)?(n(),A(O,{key:2,id:e.item.osrsId,size:`calc(${e.size} - 0.5rem)`},null,8,["id","size"])):f("",!0),v.value&&R(S)(e.item)?(n(),l("div",pe,B(z(e.item.quantity)),1)):f("",!0),(d.value||g.value)&&!e.disabled?(n(),l("button",{key:4,class:"absolute -top-1.5 -right-1.5 w-4 h-4 flex items-center justify-center bg-neutral-800 border border-neutral-600 rounded-full opacity-0 group-hover:opacity-100 hover:bg-red-500 hover:border-red-500 transition-all",onClick:o[0]||(o[0]=k(a=>c("clear"),["stop"]))},[...o[11]||(o[11]=[u("svg",{class:"w-2.5 h-2.5 text-neutral-400 hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"})],-1)])])):f("",!0)],46,re))}}),Ce=F(he,[["__scopeId","data-v-43b984fd"]]),be={class:"p-2 border-b border-neutral-800"},ge={key:0,class:"px-3 py-2 border-b border-neutral-800 flex items-center gap-2"},ye={key:1,class:"px-4 py-8 text-center text-neutral-500 text-sm"},ke={key:2,class:"max-h-64 overflow-y-auto custom-scrollbar"},xe={key:0,class:"px-4 py-8 text-center text-neutral-500 text-sm"},we={key:1,class:"px-4 py-8 text-center text-neutral-500 text-sm"},Se=["onClick"],$e={class:"text-sm text-neutral-200 truncate"},Ie=L({__name:"ItemSearch",props:{show:{type:Boolean},anchorEl:{},showQuantity:{type:Boolean},defaultQuantity:{},equipmentSlot:{}},emits:["update:show","select"],setup(e,{emit:b}){const t=e,d=b,{searchItems:g,searchSlotItems:x,loading:$,loaded:c,isSlotLoaded:y,isSlotLoading:I,loadSlotItems:z}=P(),v=p(""),i=p(1),o=p(null),a=p(null),E=p({top:"0px",left:"0px"}),M=p(!1),G=h(()=>t.equipmentSlot?I(t.equipmentSlot):$.value);h(()=>t.equipmentSlot?y(t.equipmentSlot):c.value);const j=h(()=>v.value.trim()?t.equipmentSlot?x(t.equipmentSlot,v.value,50):g(v.value,50):[]);function w(){if(!t.anchorEl)return;const m=t.anchorEl.getBoundingClientRect(),r=280;let s=m.left+m.width/2-r/2;s<8&&(s=8),s+r>window.innerWidth-8&&(s=window.innerWidth-r-8),E.value={top:`${m.bottom+8}px`,left:`${s}px`}}function H(m,r){d("select",{osrsId:m,name:r,quantity:t.showQuantity?i.value:1}),Q()}function Q(){d("update:show",!1),v.value="",i.value=t.defaultQuantity??1}function D(m){if(M.value){M.value=!1;return}const r=m.target;o.value&&!o.value.contains(r)&&t.anchorEl&&!t.anchorEl.contains(r)&&Q()}return J(()=>t.show,async m=>{var r;m&&(M.value=!0,i.value=t.defaultQuantity??1,t.equipmentSlot&&!y(t.equipmentSlot)&&z(t.equipmentSlot),await te(),w(),(r=a.value)==null||r.focus())}),X(()=>{document.addEventListener("click",D),window.addEventListener("scroll",w,!0),window.addEventListener("resize",w)}),Y(()=>{document.removeEventListener("click",D),window.removeEventListener("scroll",w,!0),window.removeEventListener("resize",w)}),(m,r)=>(n(),A(ee,{to:"body"},[C(N,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:W(()=>[e.show?(n(),l("div",{key:0,ref_key:"dropdownRef",ref:o,class:"fixed z-[9999] w-[280px] bg-neutral-900 border border-neutral-700 rounded-lg shadow-xl overflow-hidden",style:q(E.value)},[u("div",be,[V(u("input",{ref_key:"searchInputRef",ref:a,"onUpdate:modelValue":r[0]||(r[0]=s=>v.value=s),type:"text",placeholder:"Search items...",class:"w-full px-3 py-2 bg-neutral-800 border border-neutral-700 rounded-md text-sm text-neutral-100 focus:outline-none focus:ring-1 focus:ring-orange-500/30 focus:border-orange-500/50",onClick:r[1]||(r[1]=k(()=>{},["stop"]))},null,512),[[T,v.value]])]),e.showQuantity?(n(),l("div",ge,[r[4]||(r[4]=u("label",{class:"text-xs text-neutral-400"},"Qty:",-1)),V(u("input",{"onUpdate:modelValue":r[2]||(r[2]=s=>i.value=s),type:"number",min:"1",max:"2147483647",class:"w-20 px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm text-neutral-100 focus:outline-none focus:ring-1 focus:ring-orange-500/30 focus:border-orange-500/50",onClick:r[3]||(r[3]=k(()=>{},["stop"]))},null,512),[[T,i.value,void 0,{number:!0}]])])):f("",!0),G.value?(n(),l("div",ye," Loading items... ")):(n(),l("div",ke,[v.value&&j.value.length===0?(n(),l("div",xe," No items found ")):v.value?f("",!0):(n(),l("div",we," Type to search items ")),(n(!0),l(Z,null,_(j.value,s=>(n(),l("button",{key:s.id,type:"button",class:"w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-neutral-800",onClick:ze=>H(s.id,s.name)},[C(O,{id:s.id,size:"1.5rem"},null,8,["id"]),u("span",$e,B(s.name),1)],8,Se))),128))]))],4)):f("",!0)]),_:1})]))}}),Be=F(Ie,[["__scopeId","data-v-d4c25107"]]);export{Ce as I,O as _,Be as a,ne as b,S as i};
