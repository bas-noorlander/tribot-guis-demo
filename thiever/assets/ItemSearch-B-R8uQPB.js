import{d as D,e as h,c as a,g as p,o,p as B,r as f,F as P,b as d,h as E,D as y,n as J,u as V,t as j,a as Q,G as W,w as F,T as O,_ as G,x as X,f as Y,z as Z,A as _,k as U,s as A,l as ee,E as te}from"./index-BWHDonxN.js";const oe=["src","alt"],N="https://raw.githubusercontent.com/DayV-git/osrsreboxed-db/master/docs/",H=D({__name:"ItemIcon",props:{id:{},type:{default:"item"},size:{default:"2rem"}},setup(e){const g=e,t=h(()=>{switch(g.type){case"item":return`${N}items-icons/${g.id}.png`;case"equipment":return`${N}items-icons/${g.id}.png`;default:return""}});return(v,b)=>t.value?(o(),a("img",{key:0,src:t.value,alt:`Item ${e.id}`,class:"object-contain",style:B({width:e.size,height:e.size})},null,12,oe)):p("",!0)}});function ne(e){return e!==null&&"ignored"in e&&e.ignored===!0}function I(e){return e!==null&&"osrsId"in e}const re=["draggable"],ae={key:0,class:"flex flex-col items-center justify-center text-amber-500/70"},le={key:1,class:"w-1/2 h-1/2 text-neutral-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 4.5c-3.5 0-6 2.5-6 6v3c0 1 .5 2 1.5 2.5l1 .5v2h7v-2l1-.5c1-.5 1.5-1.5 1.5-2.5v-3c0-3.5-2.5-6-6-6z"},ie={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M6 7l-2 3v8h4v-5h8v5h4v-8l-2-3H6zM9 7V5a3 3 0 016 0v2"},ue={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M8 4h8v6l-1 10h-2l-1-8-1 8h-2l-1-10V4z"},de={key:3,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M14.5 4l-9 9 1.5 1.5 3-3v5.5h2v-5.5l3 3 1.5-1.5-9-9z"},ce={key:4,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M12 3L4 6v5c0 5 3.5 8.5 8 10 4.5-1.5 8-5 8-10V6l-8-3z"},ve={key:5,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"},me={key:3,class:"absolute bottom-0.5 right-0.5 px-1 min-w-[1rem] text-center text-[10px] font-bold text-amber-300 bg-neutral-900/90 rounded"},fe={class:"tooltip-text"},pe=D({__name:"ItemSlot",props:{item:{},placeholder:{},size:{default:"2.5rem"},showQuantity:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1}},emits:["click","clear","dragstart","dragend","dragover","dragleave","drop","contextmenu"],setup(e,{emit:g}){const t=e,v=h(()=>I(t.item)),b=h(()=>ne(t.item)),x=f(!1),k=f({x:0,y:0}),$=h(()=>I(t.item)?t.item.name:"");function z(){if(!c.value)return;const u=c.value.getBoundingClientRect();k.value={x:u.left+u.width/2,y:u.top}}function L(){z(),x.value=!0}function q(){x.value=!1}const l=g,c=f(null);function w(){!t.disabled&&c.value&&l("click",c.value)}function M(u){return u>=1e7?`${Math.floor(u/1e6)}M`:u>=1e5?`${Math.floor(u/1e3)}K`:u.toString()}const C=h(()=>t.showQuantity&&I(t.item)&&t.item.quantity>1);return(u,n)=>(o(),a(P,null,[d("div",{ref_key:"slotRef",ref:c,class:J(["item-slot group relative flex items-center justify-center rounded transition-all cursor-pointer",[e.transparent?"border-2 border-black/50 bg-black/30 shadow-inner hover:bg-black/20 hover:border-amber-600/50":v.value?"bg-neutral-800 border border-neutral-700 hover:border-orange-500/50":b.value?"bg-neutral-800/50 border border-dashed border-amber-600/50":"bg-neutral-800/50 border border-dashed border-neutral-700 hover:border-neutral-500",e.disabled&&"opacity-50 cursor-not-allowed",e.draggable&&v.value&&"cursor-grab active:cursor-grabbing"]]),style:B({width:e.size,height:e.size}),draggable:e.draggable&&v.value,onClick:w,onContextmenu:n[1]||(n[1]=y(s=>l("contextmenu",s),["prevent"])),onDragstart:n[2]||(n[2]=s=>l("dragstart",s)),onDragend:n[3]||(n[3]=s=>l("dragend",s)),onDragover:n[4]||(n[4]=y(s=>l("dragover",s),["prevent"])),onDragleave:n[5]||(n[5]=s=>l("dragleave",s)),onDrop:n[6]||(n[6]=y(s=>l("drop",s),["prevent"])),onMouseenter:L,onMouseleave:q},[b.value?(o(),a("div",ae,[...n[7]||(n[7]=[d("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})],-1)])])):!v.value&&e.placeholder&&!e.transparent?(o(),a("svg",le,[e.placeholder==="head"?(o(),a("path",se)):e.placeholder==="body"?(o(),a("path",ie)):e.placeholder==="legs"?(o(),a("path",ue)):e.placeholder==="weapon"?(o(),a("path",de)):e.placeholder==="shield"?(o(),a("path",ce)):(o(),a("path",ve))])):p("",!0),v.value&&V(I)(e.item)?(o(),E(H,{key:2,id:e.item.osrsId,size:`calc(${e.size} - 0.5rem)`},null,8,["id","size"])):p("",!0),C.value&&V(I)(e.item)?(o(),a("div",me,j(M(e.item.quantity)),1)):p("",!0),(v.value||b.value)&&!e.disabled?(o(),a("button",{key:4,class:"absolute -top-1.5 -right-1.5 w-4 h-4 flex items-center justify-center bg-neutral-800 border border-neutral-600 rounded-full opacity-0 group-hover:opacity-100 hover:bg-red-500 hover:border-red-500 transition-all",onClick:n[0]||(n[0]=y(s=>l("clear"),["stop"]))},[...n[8]||(n[8]=[d("svg",{class:"w-2.5 h-2.5 text-neutral-400 hover:text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[d("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M6 18L18 6M6 6l12 12"})],-1)])])):p("",!0)],46,re),(o(),E(O,{to:"body"},[Q(W,{name:"tooltip"},{default:F(()=>[x.value&&$.value?(o(),a("div",{key:0,class:"item-tooltip",style:B({left:k.value.x+"px",top:k.value.y+"px"})},[d("span",fe,j($.value),1),n[9]||(n[9]=d("div",{class:"tooltip-arrow"},null,-1))],4)):p("",!0)]),_:1})]))],64))}}),Me=G(pe,[["__scopeId","data-v-a99eb2a9"]]),he={class:"p-2 border-b border-neutral-800"},ge={key:0,class:"px-3 py-2 border-b border-neutral-800 flex items-center gap-2"},be={key:1,class:"px-4 py-8 text-center text-neutral-500 text-sm"},ye={key:2,class:"max-h-64 overflow-y-auto custom-scrollbar"},xe={key:0,class:"px-4 py-8 text-center text-neutral-500 text-sm"},ke={key:1,class:"px-4 py-8 text-center text-neutral-500 text-sm"},we=["onClick"],Se={class:"text-sm text-neutral-200 truncate"},Ie=D({__name:"ItemSearch",props:{show:{type:Boolean},anchorEl:{},showQuantity:{type:Boolean},defaultQuantity:{},equipmentSlot:{}},emits:["update:show","select"],setup(e,{emit:g}){const t=e,v=g,{searchItems:b,searchSlotItems:x,loading:k,loaded:$,isSlotLoaded:z,isSlotLoading:L,loadSlotItems:q}=X(),l=f(""),c=f(1),w=f(null),M=f(null),C=f({top:"0px",left:"0px"}),u=f(!1),n=h(()=>t.equipmentSlot?L(t.equipmentSlot):k.value);h(()=>t.equipmentSlot?z(t.equipmentSlot):$.value);const s=h(()=>l.value.trim()?t.equipmentSlot?x(t.equipmentSlot,l.value,50):b(l.value,50):[]);function S(){if(!t.anchorEl)return;const m=t.anchorEl.getBoundingClientRect(),r=280;let i=m.left+m.width/2-r/2;i<8&&(i=8),i+r>window.innerWidth-8&&(i=window.innerWidth-r-8),C.value={top:`${m.bottom+8}px`,left:`${i}px`}}function K(m,r){v("select",{osrsId:m,name:r,quantity:t.showQuantity?c.value:1}),R()}function R(){v("update:show",!1),l.value="",c.value=t.defaultQuantity??1}function T(m){if(u.value){u.value=!1;return}const r=m.target;w.value&&!w.value.contains(r)&&t.anchorEl&&!t.anchorEl.contains(r)&&R()}return Y(()=>t.show,async m=>{var r;m&&(u.value=!0,c.value=t.defaultQuantity??1,t.equipmentSlot&&!z(t.equipmentSlot)&&q(t.equipmentSlot),await te(),S(),(r=M.value)==null||r.focus())}),Z(()=>{document.addEventListener("click",T),window.addEventListener("scroll",S,!0),window.addEventListener("resize",S)}),_(()=>{document.removeEventListener("click",T),window.removeEventListener("scroll",S,!0),window.removeEventListener("resize",S)}),(m,r)=>(o(),E(O,{to:"body"},[Q(W,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"opacity-0 scale-95","enter-to-class":"opacity-100 scale-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"opacity-100 scale-100","leave-to-class":"opacity-0 scale-95"},{default:F(()=>[e.show?(o(),a("div",{key:0,ref_key:"dropdownRef",ref:w,class:"fixed z-[9999] w-[280px] bg-neutral-900 border border-neutral-700 rounded-lg shadow-xl overflow-hidden",style:B(C.value)},[d("div",he,[U(d("input",{ref_key:"searchInputRef",ref:M,"onUpdate:modelValue":r[0]||(r[0]=i=>l.value=i),type:"text",placeholder:"Search items...",class:"w-full px-3 py-2 bg-neutral-800 border border-neutral-700 rounded-md text-sm text-neutral-100 focus:outline-none focus:ring-1 focus:ring-orange-500/30 focus:border-orange-500/50",onClick:r[1]||(r[1]=y(()=>{},["stop"]))},null,512),[[A,l.value]])]),e.showQuantity?(o(),a("div",ge,[r[4]||(r[4]=d("label",{class:"text-xs text-neutral-400"},"Qty:",-1)),U(d("input",{"onUpdate:modelValue":r[2]||(r[2]=i=>c.value=i),type:"number",min:"1",max:"2147483647",class:"w-20 px-2 py-1 bg-neutral-800 border border-neutral-700 rounded text-sm text-neutral-100 focus:outline-none focus:ring-1 focus:ring-orange-500/30 focus:border-orange-500/50",onClick:r[3]||(r[3]=y(()=>{},["stop"]))},null,512),[[A,c.value,void 0,{number:!0}]])])):p("",!0),n.value?(o(),a("div",be," Loading items... ")):(o(),a("div",ye,[l.value&&s.value.length===0?(o(),a("div",xe," No items found ")):l.value?p("",!0):(o(),a("div",ke," Type to search items ")),(o(!0),a(P,null,ee(s.value,i=>(o(),a("button",{key:i.id,type:"button",class:"w-full px-3 py-2 flex items-center gap-3 text-left transition-colors hover:bg-neutral-800",onClick:$e=>K(i.id,i.name)},[Q(H,{id:i.id,size:"1.5rem"},null,8,["id"]),d("span",Se,j(i.name),1)],8,we))),128))]))],4)):p("",!0)]),_:1})]))}}),Ce=G(Ie,[["__scopeId","data-v-d4c25107"]]);export{Me as I,H as _,Ce as a,ne as b,I as i};
